"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[450],{450:(O,m,c)=>{c.r(m),c.d(m,{RecommendedPage:()=>v});var p=c(5861),_=c(6895),h=c(433),r=c(9985),b=c(8179),e=c(4650),f=c(7977),Z=c(958),P=c(1205);function C(l,g){if(1&l){const a=e.EpF();e.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",42),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.goToView())}),e._UZ(3,"ion-icon",43),e._uU(4," \xa0 VIEW PROFILE"),e.qZA(),e.TgZ(5,"ion-item",42),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.goToAddUserPage())}),e._UZ(6,"ion-icon",44),e._uU(7," \xa0 Back to Reports"),e.qZA(),e.TgZ(8,"ion-item",42),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.presentConfirmationAlert())}),e._UZ(9,"ion-icon",45),e._uU(10,"\xa0"),e.TgZ(11,"p"),e._uU(12,"LOGOUT"),e.qZA()()()()}2&l&&(e.xp6(2),e.Q6J("button",!0)("detail",!1),e.xp6(3),e.Q6J("button",!0)("detail",!1),e.xp6(3),e.Q6J("button",!0)("detail",!1))}function T(l,g){if(1&l&&(e.ynx(0),e.TgZ(1,"ion-select-option",46),e._uU(2),e.qZA(),e.BQk()),2&l){const a=g.$implicit;e.xp6(1),e.s9C("value",a.course),e.xp6(1),e.hij(" ",a.course," ")}}function A(l,g){if(1&l){const a=e.EpF();e.TgZ(0,"tr")(1,"td",47),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",47),e._uU(6),e.qZA(),e.TgZ(7,"td",47),e._uU(8),e.qZA(),e.TgZ(9,"td",47),e._uU(10),e.qZA(),e.TgZ(11,"td",47),e._uU(12),e.qZA(),e.TgZ(13,"td",47),e._uU(14),e.qZA(),e.TgZ(15,"td",47),e._uU(16),e.qZA(),e.TgZ(17,"td",47),e._uU(18),e.qZA(),e.TgZ(19,"td",47),e._uU(20),e.qZA(),e.TgZ(21,"td",47),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"td")(25,"button",48),e.NdJ("click",function(){const o=e.CHM(a).$implicit,i=e.oxw();return e.KtG(i.updateStatus(o.email))}),e._uU(26,"Placed"),e.qZA()()()}if(2&l){const a=g.$implicit;e.xp6(2),e.Oqu(a.fullName),e.xp6(2),e.Oqu(a.studentno),e.xp6(2),e.Oqu(a.faculty),e.xp6(2),e.Oqu(a.course),e.xp6(2),e.Oqu(a.count),e.xp6(2),e.Oqu(a.city),e.xp6(2),e.Oqu(a.email),e.xp6(2),e.Oqu(a.level),e.xp6(2),e.Oqu(a.gradeAverage),e.xp6(2),e.Oqu(a.companyNames.join(", ")),e.xp6(2),e.Oqu(e.xi3(23,11,null==a.recommendDate?null:a.recommendDate.toDate(),"yyyy-MM-dd"))}}let v=(()=>{var l;class g{constructor(n,t,o,i,s,u,d,M,U){this.firestore=n,this.loadingController=t,this.auth=i,this.toastController=s,this.alertController=u,this.navController=d,this.datePipe=M,this.db=U,this.tableData=[],this.faculty="",this.level="",this.course=[],this.crs="",this.coursedata=[],this.showSecondDropdownFlag=!1,this.recommended=0,this.naturalSciencesData=[],this.gradeAverage="",this.currentPage=1,this.rowsPerPage=10,this.companyNames=[],this.studentno="",this.getAllData()}previousPage(){this.currentPage--}goToView(){this.navController.navigateBack("/staffprofile")}goToAddUserPage(){this.navController.navigateBack("/reports")}searchByStudentNo(){this.studentno&&""!==this.studentno.trim()?this.db.collection("studentProfile",t=>t.where("studentno","==",this.studentno)).valueChanges().subscribe(t=>{this.tableData=t}):this.getAllData()}presentConfirmationAlert(){var n=this;return(0,p.Z)(function*(){yield(yield n.alertController.create({header:"Confirmation",message:"Are you sure you want to SIGN OUT?",buttons:[{text:"Cancel",role:"cancel",cssClass:"my-custom-alert",handler:()=>{console.log("Confirmation canceled")}},{text:"Confirm",handler:()=>{n.auth.signOut().then(()=>{n.navController.navigateForward("/sign-in"),n.presentToast()}).catch(o=>{})}}]})).present()})()}presentToast(){throw new Error("Method not implemented.")}nextPage(){this.currentPage++}totalPages(){return Math.ceil(this.tableData.length/this.rowsPerPage)}getAllData(){this.db.collection("studentProfile",n=>n.where("status","==","recommended")).valueChanges().subscribe(n=>{this.userData=n,console.log(n),this.tableData=n})}goToHomePage(){this.navController.navigateBack("/home")}ngOnInit(){}getCourse(n){var t=this;return(0,p.Z)(function*(){t.db.collection(n.detail.value,o=>o.where("course",">","")).valueChanges().subscribe(o=>{t.course=o,t.faculty=n.detail.value,t.level=n.detail.value})})()}isArray(n){return Array.isArray(n)}applyFilter(){this.firestore.collection("studentProfile",n=>n.where("faculty","==",this.faculty).where("status","==","recommended")).valueChanges().subscribe(n=>{this.tableData=n,console.log(n)})}applySecondFilter(){this.firestore.collection("studentProfile",n=>n.where("course","==",this.crs).where("status","==","recommended")).valueChanges().subscribe(n=>{this.tableData=n,console.log(n)})}levelFilter(){this.firestore.collection("studentProfile",t=>{let o=t;return this.level&&(o=o.where("level","==",this.level).where("status","==","recommended")),this.faculty&&(o=o.where("faculty","==",this.faculty)),this.crs&&(o=o.where("course","==",this.crs)),o}).valueChanges().subscribe(t=>{let o=t;if(""!==this.gradeAverage){const i=Number(this.gradeAverage),s=i+9;o=o.filter(u=>{const d=Number(u.gradeAverage);return d>=i&&d<=s})}console.log(o),this.tableData=o})}avg(){if(""!==this.gradeAverage){const n=Number(this.gradeAverage),t=n+9;this.firestore.collection("studentProfile",i=>{let s=i.where("status","==","recommended");return this.crs&&(s=s.where("course","==",this.crs)),s}).valueChanges().subscribe(i=>{const s=i.filter(u=>{const d=Number(u.gradeAverage);return d>=n&&d<=t});console.log(s),this.tableData=s},i=>{console.error("Error retrieving data:",i)})}}updateStatus(n){var t=this;return(0,p.Z)(function*(){const i=yield t.db.collection("studentProfile",s=>s.where("email","==",n)).get().toPromise();if(i&&i.docs.length>0){const s=i.docs[0].ref,u=b.EK.now();yield s.update({status:"placed",placedDate:u}),console.log("Status updated successfully")}else console.log("No matching documents found")})()}}return(l=g).\u0275fac=function(n){return new(n||l)(e.Y36(f.ST),e.Y36(r.HT),e.Y36(Z.SH),e.Y36(P.zQ),e.Y36(r.yF),e.Y36(r.Br),e.Y36(Z.SH),e.Y36(_.uU),e.Y36(f.ST))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-recommended"]],standalone:!0,features:[e._Bn([_.uU]),e.jDz],decls:127,vars:12,consts:[["slot","start",1,"phuto"],["src","assets\\MUT LOGO.png",1,"image-size"],[1,"header-title"],["slot","end"],["id","popover-button"],["name","person"],["trigger","popover-button",3,"dismissOnSelect"],[2,"--background","url('assets/view2.jpg') no-repeat center / cover",3,"fullscreen"],["lines","none",1,"dropdown"],[3,"ngModel","ngModelChange","ionChange"],["value","Natural Sciences"],["value","Management Sciences"],["value","Engineering"],["interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],[4,"ngFor","ngForOf"],["item-start",""],["value","50"],["value","60"],["value","70"],["value","80"],["value","90"],["interface","popover","placeholder","",3,"ngModel","ngModelChange","ionChange"],["value","WIL"],["value","EMPLOYMENT"],["type","text","placeholder","Search using student number",3,"ngModel","ngModelChange","ionChange"],[1,"cent"],[2,"width","100%","overflow-x","auto"],[1,"bordered"],[1,"color"],["name","albums-outline"],["name","school"],["name","book"],["name","trending-up"],["name","location"],["name","mail"],["name","options"],["name","calendar"],[1,"body"],[1,"total-text","ion-text-left"],[1,"pagination"],[1,"centered-buttons"],[1,"pagination-button",3,"disabled","click"],["lines","none",3,"button","detail","click"],["name","eye"],["name","arrow-back-outline"],["color","danger","name","exit"],[3,"value"],[1,"white-text"],["data-tooltip","Update Status",1,"status-btn",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"img",1),e.qZA(),e.TgZ(4,"h2",2),e._uU(5,"RECOMMENDED APPLICANTS"),e.qZA(),e.TgZ(6,"ion-buttons",3)(7,"ion-button")(8,"ion-button",4),e._UZ(9,"ion-icon",5),e.qZA(),e.TgZ(10,"ion-popover",6),e.YNc(11,C,13,6,"ng-template"),e.qZA()()()()(),e.TgZ(12,"ion-content",7)(13,"div")(14,"ion-grid")(15,"ion-row")(16,"ion-col")(17,"ion-item",8)(18,"ion-label"),e._uU(19,"Faculty"),e.qZA(),e.TgZ(20,"ion-select",9),e.NdJ("ngModelChange",function(i){return t.faculty=i})("ionChange",function(i){return t.getCourse(i)})("ionChange",function(){return t.applyFilter()}),e.TgZ(21,"ion-select-option",10),e._uU(22,"Natural Sciences"),e.qZA(),e.TgZ(23,"ion-select-option",11),e._uU(24,"Management Sciences"),e.qZA(),e.TgZ(25,"ion-select-option",12),e._uU(26,"Engineering"),e.qZA()()()(),e.TgZ(27,"ion-col")(28,"ion-item",8)(29,"ion-label"),e._uU(30,"Course"),e.qZA(),e.TgZ(31,"ion-select",13),e.NdJ("ngModelChange",function(i){return t.crs=i})("ionChange",function(){return t.applySecondFilter()}),e.YNc(32,T,3,2,"ng-container",14),e.qZA()()(),e.TgZ(33,"ion-col")(34,"ion-item",15)(35,"ion-label"),e._uU(36,"Grade Average"),e.qZA(),e.TgZ(37,"ion-select",9),e.NdJ("ngModelChange",function(i){return t.gradeAverage=i})("ionChange",function(){return t.avg()}),e.TgZ(38,"ion-select-option",16),e._uU(39,"50% - 59%"),e.qZA(),e.TgZ(40,"ion-select-option",17),e._uU(41,"60% - 69%"),e.qZA(),e.TgZ(42,"ion-select-option",18),e._uU(43,"70% - 79%"),e.qZA(),e.TgZ(44,"ion-select-option",19),e._uU(45,"80% - 89%"),e.qZA(),e.TgZ(46,"ion-select-option",20),e._uU(47,"90% - 100%"),e.qZA()()()(),e.TgZ(48,"ion-col")(49,"ion-item",15)(50,"ion-label"),e._uU(51,"LEVEL"),e.qZA(),e.TgZ(52,"ion-select",21),e.NdJ("ngModelChange",function(i){return t.level=i})("ionChange",function(){return t.levelFilter()}),e.TgZ(53,"ion-select-option",22),e._uU(54,"WIL"),e.qZA(),e.TgZ(55,"ion-select-option",23),e._uU(56,"EMPLOYMENT"),e.qZA()()()()()(),e.TgZ(57,"ion-item")(58,"ion-input",24),e.NdJ("ngModelChange",function(i){return t.studentno=i})("ionChange",function(){return t.searchByStudentNo()}),e.qZA()(),e.TgZ(59,"div",25)(60,"ion-grid")(61,"div",26)(62,"table",27)(63,"thead",28)(64,"tr")(65,"th"),e._UZ(66,"ion-icon",29)(67,"br"),e._uU(68," StudentNo "),e.qZA(),e.TgZ(69,"th"),e._UZ(70,"ion-icon",5)(71,"br"),e._uU(72," Student "),e.qZA(),e.TgZ(73,"th"),e._UZ(74,"ion-icon",30)(75,"br"),e._uU(76," Faculty "),e.qZA(),e.TgZ(77,"th"),e._UZ(78,"ion-icon",31)(79,"br"),e._uU(80," Course "),e.qZA(),e.TgZ(81,"th"),e._UZ(82,"ion-icon",32)(83,"br"),e._uU(84," No of Recommendations "),e.qZA(),e.TgZ(85,"th"),e._UZ(86,"ion-icon",33)(87,"br"),e._uU(88," City "),e.qZA(),e.TgZ(89,"th"),e._UZ(90,"ion-icon",34)(91,"br"),e._uU(92," Email "),e.qZA(),e.TgZ(93,"th"),e._UZ(94,"ion-icon",35)(95,"br"),e._uU(96," Level "),e.qZA(),e.TgZ(97,"th"),e._UZ(98,"ion-icon",35)(99,"br"),e._uU(100," Grade Average "),e.qZA(),e.TgZ(101,"th"),e._UZ(102,"ion-icon",35)(103,"br"),e._uU(104," Company "),e.qZA(),e.TgZ(105,"th"),e._UZ(106,"ion-icon",36)(107,"br"),e._uU(108," Recommendation Date "),e.qZA(),e.TgZ(109,"th"),e._UZ(110,"ion-icon",35)(111,"br"),e._uU(112," Status "),e.qZA()()(),e.TgZ(113,"tbody",37),e.YNc(114,A,27,14,"tr",14),e.qZA()()(),e.TgZ(115,"p",38),e._uU(116),e.qZA(),e.TgZ(117,"div",39)(118,"div",40)(119,"button",41),e.NdJ("click",function(){return t.previousPage()}),e._uU(120,"Previous"),e.qZA(),e.TgZ(121,"button",41),e.NdJ("click",function(){return t.nextPage()}),e._uU(122,"Next"),e.qZA()()()()()()(),e.TgZ(123,"ion-footer"),e._uU(124," Designed by @"),e.TgZ(125,"b"),e._uU(126,"MUT INNOVATIONLAB"),e.qZA()()),2&n&&(e.xp6(10),e.Q6J("dismissOnSelect",!0),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngModel",t.faculty),e.xp6(11),e.Q6J("ngModel",t.crs),e.xp6(1),e.Q6J("ngForOf",t.course),e.xp6(5),e.Q6J("ngModel",t.gradeAverage),e.xp6(15),e.Q6J("ngModel",t.level),e.xp6(6),e.Q6J("ngModel",t.studentno),e.xp6(56),e.Q6J("ngForOf",t.tableData.slice((t.currentPage-1)*t.rowsPerPage,t.currentPage*t.rowsPerPage)),e.xp6(2),e.hij("Current Number of Applications: ",t.tableData.length,""),e.xp6(3),e.Q6J("disabled",1===t.currentPage),e.xp6(2),e.Q6J("disabled",t.currentPage===t.totalPages()))},dependencies:[r.Pc,r.YG,r.Sm,r.wI,r.W2,r.fr,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.t9,r.n0,r.sr,r.d8,r.QI,r.j9,_.ez,_.sg,_.uU,h.u5,h.JJ,h.On],styles:[".image-size[_ngcontent-%COMP%]{width:100px;height:60px}.header-title[_ngcontent-%COMP%]{margin:0 auto;text-align:center;color:#fff;font-weight:700}ion-content[_ngcontent-%COMP%]{--background:#ECF0F6}#popover-button[_ngcontent-%COMP%]{color:#fff}ion-footer[_ngcontent-%COMP%]{background-color:#300505;color:#fcfcfc;text-align:center}.bordered[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.color[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#641c1c;color:#fff;font-weight:700}.body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#7a726a}.body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#ebdddd}.cent[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .cent[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:8px}.cent[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}.logout-button[_ngcontent-%COMP%]{margin-right:10px;--color: white;--ion-color-base: white}.total-text[_ngcontent-%COMP%]{font-weight:700;margin-top:10px}.pagination[_ngcontent-%COMP%], .centered-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.pagination-button[_ngcontent-%COMP%]{background-color:#c42e2e;color:#fff;padding:10px 20px;border:none;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px;cursor:pointer;border-radius:4px;box-shadow:0 2px 4px #0003}.pagination-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.status-btn[_ngcontent-%COMP%]{position:relative}.status-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;font-size:16px;border:none;cursor:pointer;border-radius:4px}.status-btn[_ngcontent-%COMP%]:hover{background-color:#dc3535}.status-btn[_ngcontent-%COMP%]:before{content:attr(data-tooltip);position:absolute;top:-30px;left:50%;transform:translate(-50%);background-color:#000;color:#fff;padding:5px 10px;border-radius:4px;visibility:hidden;opacity:0;transition:opacity .3s}.status-btn[_ngcontent-%COMP%]:hover:before{visibility:visible;opacity:1}.image-size[_ngcontent-%COMP%]{width:100px;height:60px;padding-top:0;padding-bottom:0;margin-bottom:0}"]}),g})()}}]);