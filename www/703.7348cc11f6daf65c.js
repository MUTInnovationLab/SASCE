"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[703],{703:(O,C,c)=>{c.r(C),c.d(C,{GaValidationPage:()=>k});var s=c(5861),h=c(6895),_=c(433),i=c(9985),y=c(2991),f=c(529),t=c(4650),b=c(7977);let v=(()=>{var a;class u{constructor(e,o,n,r){this.http=e,this.modalController=o,this.db=n,this.toastController=r,this.email="",this.studentId="",this.reason=""}ngOnInit(){}send(){this.db.collection("studentProfile").doc(this.studentId).update({status:"declined"}).then(()=>{console.log("Declined false information!!!"),this.showToast("Declined false information!!!"),this.sendDeclineNotification(this.email)}).catch(e=>{console.error("Error updating status:",e)}),this.modalController.dismiss()}formatBody(){this.reason=this.reason.replace(/\n/g,"<br>")}sendDeclineNotification(e){const p=`recipient=${encodeURIComponent(e)}&subject=${encodeURIComponent("Application Rejection Notice")}&body=${encodeURIComponent(this.reason)}`,m=(new f.WM).set("Content-Type","application/x-www-form-urlencoded");this.http.get("https://mutinnovationlab.000webhostapp.com/send_decline_notifictaion.php?"+p,{headers:m}).subscribe(d=>{console.log(d+" (notification)")},d=>{console.error("Error:",d+" (notification)")})}dismiss(){this.modalController.dismiss()}showToast(e){var o=this;return(0,s.Z)(function*(){(yield o.toastController.create({message:e,duration:2e3,position:"top"})).present()})()}}return(a=u).\u0275fac=function(e){return new(e||a)(t.Y36(f.eN),t.Y36(i.IN),t.Y36(b.ST),t.Y36(i.yF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-decline-modal"]],inputs:{email:"email",studentId:"studentId"},standalone:!0,features:[t.jDz],decls:13,vars:1,consts:[[1,"modal-ion-content"],[1,"modal-container"],[1,"modal-message"],[1,"modal-item"],["position","floating",1,"modal-label"],["rows","6","cols","20","placeholder","Enter reason here...","auto-grow","true",1,"modal-input",3,"ngModel","ngModelChange","ionChange"],[1,"modal-button-group"],["expand","block","color","danger",1,"modal-button",3,"click"],["expand","block","color","medium",1,"modal-button",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0)(1,"div",1)(2,"p",2),t._uU(3,"Please provide a detailed explanation for declining the applicant's application:"),t.qZA(),t.TgZ(4,"ion-item",3)(5,"ion-label",4),t._uU(6,"Reason"),t.qZA(),t.TgZ(7,"ion-textarea",5),t.NdJ("ngModelChange",function(r){return o.reason=r})("ionChange",function(){return o.formatBody()}),t.qZA()(),t.TgZ(8,"div",6)(9,"ion-button",7),t.NdJ("click",function(){return o.send()}),t._uU(10,"Send"),t.qZA(),t.TgZ(11,"ion-button",8),t.NdJ("click",function(){return o.dismiss()}),t._uU(12,"Cancel"),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngModel",o.reason))},dependencies:[i.Pc,i.YG,i.W2,i.Ie,i.Q$,i.g2,i.j9,h.ez,_.u5,_.JJ,_.On],styles:[".modal-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:16px}.modal-item[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;--background:#f4f8c8}.modal-label[_ngcontent-%COMP%]{color:#333}.modal-input[_ngcontent-%COMP%]{--ion-background-color: #f9f9f9;--ion-input-border-color: #dddddd;--ion-input-color: #333333}.modal-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;margin-top:auto}.modal-button[_ngcontent-%COMP%]{--background: deepskyblue;--color: #ffffff;--border-radius: 8px;padding:8px;font-weight:700;cursor:pointer}.modal-message[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:16px;font-weight:bolder}"]}),u})();var T=c(3704),P=c(958),Z=c(1205);function M(a,u){if(1&a){const l=t.EpF();t.TgZ(0,"tr")(1,"td",26),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.openValidateModal(n.academicRecordURl,n.cvUrl,n.idURL,n.letterURL))}),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.openViewAcademicRecordModal(n.academicRecordURl))}),t.TgZ(6,"ion-badge",28),t._uU(7),t.qZA(),t.TgZ(8,"span",29),t._uU(9,"View Academic record"),t.qZA()(),t.TgZ(10,"td",30),t._uU(11),t.qZA(),t.TgZ(12,"td")(13,"button",31),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.approve(n.id,n.email))}),t._uU(14," Approve "),t.qZA(),t.TgZ(15,"button",32),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.decline(n.id,n.email))}),t._uU(16," Decline "),t.qZA()()()}if(2&a){const l=u.$implicit;t.xp6(2),t.Oqu(l.fullName),t.xp6(2),t.Oqu(l.studentno),t.xp6(3),t.Oqu(l.gradeAverage),t.xp6(4),t.Oqu(l.email)}}const U=function(a){return{open:a}};let k=(()=>{var a;class u{constructor(e,o,n,r,g,p,m,d,w,x){this.http=e,this.firestore=o,this.loadingController=n,this.auth=g,this.toastController=p,this.alertController=m,this.navController=d,this.db=w,this.modalController=x,this.tableData=[],this.currentPage=1,this.rowsPerPage=10,this.userEmailArray=[],this.isNavOpen=!1,this.getAllData()}goToView(){this.navController.navigateBack("/staffprofile")}getAllData(){this.db.collection("studentProfile",e=>e.where("status","==","pending")).snapshotChanges().subscribe(e=>{this.userData=e.map(o=>({id:o.payload.doc.id,...o.payload.doc.data()})),console.log(this.userData),this.tableData=this.userData})}toggleNav(){console.log("menu"),this.isNavOpen=!this.isNavOpen}openViewAcademicRecordModal(e){var o=this;return(0,s.Z)(function*(){yield(yield o.modalController.create({component:y.ViewAcademicRecordModalPage,componentProps:{pdfUrl:e}})).present()})()}decline(e,o){var n=this;return(0,s.Z)(function*(){return yield(yield n.modalController.create({component:v,componentProps:{studentId:e,email:o},cssClass:"modal-ion-content"})).present()})()}approve(e,o){this.db.collection("studentProfile").doc(e).update({status:"active"}).then(()=>{console.log("Approved!!!"),this.showToast("Approved!!!"),this.sendApproveNotification(o)}).catch(r=>{console.error("Error updating status:",r)})}sendApproveNotification(e){const p=`recipient=${encodeURIComponent(e)}&subject=${encodeURIComponent("Application Approval Notice")}&body=${encodeURIComponent("Thank you for submitting your cv, it is now on our database. We will forward it to companies when relevant opportunities arises.")}`,m=(new f.WM).set("Content-Type","application/x-www-form-urlencoded");this.http.get("https://mutinnovationlab.000webhostapp.com/send_approve_notification.php?"+p,{headers:m}).subscribe(d=>{console.log(d+" (notification)")},d=>{console.error("Error:",d+" (notification)")})}previousPage(){this.currentPage--}handleMenuClick(){console.log("Menu button clicked")}nextPage(){this.currentPage++}totalPages(){return Math.ceil(this.tableData.length/this.rowsPerPage)}showToast(e){var o=this;return(0,s.Z)(function*(){(yield o.toastController.create({message:e,duration:2e3,position:"top"})).present()})()}ngOnInit(){}ionViewDidEnter(){this.getUser()}getUser(){var e=this;return(0,s.Z)(function*(){const o=yield e.auth.currentUser;if(o)try{const n=yield e.db.collection("registeredStaff").ref.where("email","==",o.email).get();n.empty||(e.userDocument=n.docs[0].data(),console.log(e.userDocument))}catch(n){console.error("Error getting user document:",n)}})()}goToAddUser(){var e=this;return(0,s.Z)(function*(){try{yield e.getUser(),e.userDocument&&e.userDocument.role&&"on"===e.userDocument.role.addUser?e.navController.navigateForward("/add-user"):(yield e.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to Add user Page:",o)}})()}goToEmployment(){var e=this;return(0,s.Z)(function*(){try{yield e.getUser(),e.userDocument&&e.userDocument.role&&"on"===e.userDocument.role.employment?e.navController.navigateForward("/employment-page"):(yield e.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to Employment Page:",o)}})()}goToReports(){var e=this;return(0,s.Z)(function*(){try{yield e.getUser(),e.userDocument&&e.userDocument.role&&"on"===e.userDocument.role.statistic?e.navController.navigateForward("/reports"):(yield e.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to Reports Page:",o)}})()}goToHistory(){var e=this;return(0,s.Z)(function*(){try{yield e.getUser(),e.userDocument&&e.userDocument.role&&"on"===e.userDocument.role.history?e.navController.navigateForward("/history"):(yield e.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to History Page:",o)}})()}goToWil(){var e=this;return(0,s.Z)(function*(){try{yield e.getUser(),e.userDocument&&e.userDocument.role&&"on"===e.userDocument.role.wil?e.navController.navigateForward("/wil-page"):(yield e.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to WIL Page:",o)}})()}goToMenuPage(){this.navController.navigateForward("/menu").then(()=>{window.location.reload()})}presentConfirmationAlert(){var e=this;return(0,s.Z)(function*(){yield(yield e.alertController.create({header:"Confirmation",message:"Are you sure you want to SIGN OUT?",buttons:[{text:"Cancel",role:"cancel",cssClass:"my-custom-alert",handler:()=>{console.log("Confirmation canceled")}},{text:"Confirm",handler:()=>{e.auth.signOut().then(()=>{e.navController.navigateForward("/sign-in"),e.presentToast()}).catch(n=>{})}}]})).present()})()}presentToast(){var e=this;return(0,s.Z)(function*(){yield(yield e.toastController.create({message:"SIGNED OUT!",duration:1500,position:"top"})).present()})()}goToHomePage(){this.navController.navigateBack("/home")}openDeclineModal(){var e=this;return(0,s.Z)(function*(){return yield(yield e.modalController.create({component:v,componentProps:{}})).present()})()}openValidateModal(e,o,n,r){var g=this;return(0,s.Z)(function*(){return console.log(e),yield(yield g.modalController.create({component:T.ValidateDocsModalPage,componentProps:{academicRecordURl:e,cvUrl:o,idURL:n,letterURL:r}})).present()})()}}return(a=u).\u0275fac=function(e){return new(e||a)(t.Y36(f.eN),t.Y36(b.ST),t.Y36(i.HT),t.Y36(P.SH),t.Y36(Z.zQ),t.Y36(i.yF),t.Y36(i.Br),t.Y36(P.SH),t.Y36(b.ST),t.Y36(i.IN))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ga-validation"]],standalone:!0,features:[t.jDz],decls:68,vars:9,consts:[[3,"translucent"],[1,"header-container"],[1,"logo"],["src","assets\\MUT LOGO.png","alt","Logo"],[1,"hamburger-menu",3,"click"],[1,"bar"],[1,"nav-links",3,"ngClass"],[1,"nav-link",3,"click"],[1,"nav-link","business-dropdown"],["name","caret-down-outline"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],[2,"--background","url('assets/view2.jpg') no-repeat center / cover",3,"fullscreen"],[1,"cent"],[1,"bordered"],[1,"color"],["name","person"],["name","albums-outline"],["name","trending-up"],["name","mail"],[1,"body"],[4,"ngFor","ngForOf"],[1,"total-text","ion-text-left"],[1,"pagination"],[1,"centered-buttons"],[1,"pagination-button",3,"disabled","click"],[1,"white-text",3,"click"],[1,"tooltip",3,"click"],["color","tertiary",2,"cursor","pointer"],[1,"tooltiptext"],[1,"white-text"],["ion-button","",1,"horizontal-button","approve-button",2,"color","green",3,"click"],["ion-button","","color","success",1,"horizontal-button","decline-button",2,"color","red",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"nav")(2,"div",1)(3,"a",2),t._UZ(4,"img",3),t._uU(5,"Profile Validator"),t.qZA(),t.TgZ(6,"div",4),t.NdJ("click",function(){return o.toggleNav()}),t._UZ(7,"div",5)(8,"div",5)(9,"div",5),t.qZA(),t.TgZ(10,"div",6)(11,"a",7),t.NdJ("click",function(){return o.goToMenuPage()}),t._uU(12,"Menu"),t.qZA(),t.TgZ(13,"div",8)(14,"span"),t._UZ(15,"ion-icon",9),t._uU(16,"Tasks"),t.qZA(),t.TgZ(17,"div",10)(18,"a",11),t.NdJ("click",function(){return o.goToEmployment()}),t._uU(19,"Employment"),t.qZA(),t.TgZ(20,"a",11),t.NdJ("click",function(){return o.goToHistory()}),t._uU(21,"History"),t.qZA(),t.TgZ(22,"a",11),t.NdJ("click",function(){return o.goToWil()}),t._uU(23,"WIL"),t.qZA(),t.TgZ(24,"a",11),t.NdJ("click",function(){return o.goToView()}),t._uU(25,"Profile"),t.qZA()()(),t.TgZ(26,"a",7),t.NdJ("click",function(){return o.goToReports()}),t._uU(27,"Reports"),t.qZA(),t.TgZ(28,"a",7),t.NdJ("click",function(){return o.presentConfirmationAlert()}),t._uU(29,"Sign Out"),t.qZA()()()()(),t.TgZ(30,"ion-content",12)(31,"div",13)(32,"ion-grid")(33,"table",14)(34,"thead",15)(35,"tr")(36,"th"),t._UZ(37,"ion-icon",16)(38,"br"),t._uU(39," Student "),t.qZA(),t.TgZ(40,"th"),t._UZ(41,"ion-icon",17)(42,"br"),t._uU(43," Student No. "),t.qZA(),t.TgZ(44,"th"),t._UZ(45,"ion-icon",18)(46,"br"),t._uU(47," Grade Average "),t.qZA(),t.TgZ(48,"th"),t._UZ(49,"ion-icon",19)(50,"br"),t._uU(51," Email "),t.qZA(),t.TgZ(52,"th"),t._uU(53," Actions "),t.qZA()()(),t.TgZ(54,"tbody",20),t.YNc(55,M,17,4,"tr",21),t.qZA()(),t.TgZ(56,"p",22),t._uU(57),t.qZA()()(),t.TgZ(58,"div",23)(59,"div",24)(60,"button",25),t.NdJ("click",function(){return o.previousPage()}),t._uU(61,"Previous"),t.qZA(),t.TgZ(62,"button",25),t.NdJ("click",function(){return o.nextPage()}),t._uU(63,"Next"),t.qZA()()()(),t.TgZ(64,"ion-footer"),t._uU(65," Designed by @"),t.TgZ(66,"b"),t._uU(67,"MUT INNOVATIONLAB"),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(10),t.Q6J("ngClass",t.VKq(7,U,o.isNavOpen)),t.xp6(20),t.Q6J("fullscreen",!0),t.xp6(25),t.Q6J("ngForOf",o.tableData.slice((o.currentPage-1)*o.rowsPerPage,o.currentPage*o.rowsPerPage)),t.xp6(2),t.hij("Current Number of Applications: ",o.tableData.length,""),t.xp6(3),t.Q6J("disabled",1===o.currentPage),t.xp6(2),t.Q6J("disabled",o.currentPage===o.totalPages()))},dependencies:[i.Pc,i.yp,i.W2,i.fr,i.jY,i.Gu,i.gu,h.ez,h.mk,h.sg,_.u5],styles:['.bordered[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}ion-footer[_ngcontent-%COMP%]{background-color:#300505;color:#fcfcfc;text-align:center}.color[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#641c1c;color:#fff;font-weight:700}.body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#7a726a}.body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#ebdddd}.cent[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .cent[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:8px}.cent[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}.logout-button[_ngcontent-%COMP%]{margin-right:10px;--color: white;--ion-color-base: white}.total-text[_ngcontent-%COMP%]{font-weight:700;margin-top:10px}.horizontal-button[_ngcontent-%COMP%]{display:inline-block;width:60px;height:40px;margin-right:10px;padding:0;border-radius:0}.horizontal-button.approve-button[_ngcontent-%COMP%]{--background: green;--color: green}.horizontal-button.decline-button[_ngcontent-%COMP%]{--background: red;--color: red}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:200px;background-color:#000;color:#fff;text-align:center;padding:5px;border-radius:5px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-100px;opacity:0;transition:opacity .3s}ion-content[_ngcontent-%COMP%]{--background:#ECF0F6}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#000000 transparent transparent transparent}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.pagination[_ngcontent-%COMP%], .centered-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.pagination-button[_ngcontent-%COMP%]{background-color:#c42e2e;color:#fff;padding:10px 20px;border:none;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px;cursor:pointer;border-radius:4px;box-shadow:0 2px 4px #0003}.pagination-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}ion-header[_ngcontent-%COMP%]{background-color:maroon}']}),u})()}}]);