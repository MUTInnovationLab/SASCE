"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8327],{8327:(P,c,i)=>{i.r(c),i.d(c,{ReportsPage:()=>f});var s=i(5861),u=i(6895),_=i(433),n=i(9985),e=i(4650),m=i(958),p=i(1205),h=i(377),v=i(7977);const T=function(a){return{open:a}};let f=(()=>{var a;class g{constructor(t,o,r,l,Z,C,U){this.navController=t,this.loadingController=o,this.auth=r,this.fStorage=l,this.db=Z,this.alertController=C,this.toastController=U,this.coursedata=[],this.course=[],this.faculty="",this.showSecondDropdownFlag=!1,this.city=[],this.cities=[],this.isNavOpen=!1}ngOnInit(){this.getCities(),this.getUserCount(),this.getRecommendedCounts(),this.getPlacedCounts()}toggleNav(){console.log("menu"),this.isNavOpen=!this.isNavOpen}goToPage(){this.navController.navigateForward("/sign-in")}goToAllAppsPage(){this.navController.navigateForward("/all-aplications")}goToPlaced(){this.navController.navigateForward("/placed")}goToRecommended(){this.navController.navigateForward("/recommended")}getCourse(t){var o=this;return(0,s.Z)(function*(){if(!(yield o.auth.currentUser))throw new Error("User not found");o.db.collection(t.detail.value,l=>l.where("course",">","")).valueChanges().subscribe(l=>{o.course=l})})()}isArray(t){return Array.isArray(t)}getCities(){var t=this;return(0,s.Z)(function*(){if(!(yield t.auth.currentUser))throw new Error("User not found");t.db.collection("studentProfile",r=>r.where("city",">","")).valueChanges().subscribe(r=>{t.cities=r,console.log(t.cities)})})()}presentConfirmationAlert(){var t=this;return(0,s.Z)(function*(){yield(yield t.alertController.create({header:"Confirmation",message:"Are you sure you want to SIGN OUT?",buttons:[{text:"Cancel",role:"cancel",cssClass:"my-custom-alert",handler:()=>{console.log("Confirmation canceled")}},{text:"Confirm",handler:()=>{t.auth.signOut().then(()=>{t.navController.navigateForward("/sign-in"),t.presentToast()}).catch(r=>{})}}]})).present()})()}presentToast(){var t=this;return(0,s.Z)(function*(){yield(yield t.toastController.create({message:"SIGNED OUT!",duration:1500,position:"top"})).present()})()}getUserCount(){this.db.collection("studentProfile").get().subscribe(t=>{this.userCount=t.size},t=>{console.error("Error getting user count:",t)})}getRecommendedCounts(){this.db.collection("studentProfile",t=>t.where("status","==","recommended")).get().subscribe(t=>{this.count=t.size},t=>{console.error("Error getting user count:",t)})}getPlacedCounts(){this.db.collection("studentProfile",t=>t.where("status","==","placed")).get().subscribe(t=>{this.placed=t.size},t=>{console.error("Error getting user count:",t)})}goToHomePage(){this.navController.navigateBack("/home")}goToView(){this.navController.navigateBack("/staffprofile")}handleMenuClick(){console.log("Menu button clicked")}ionViewDidEnter(){this.getUser()}getUser(){var t=this;return(0,s.Z)(function*(){const o=yield t.auth.currentUser;if(o)try{const r=yield t.db.collection("registeredStaff").ref.where("email","==",o.email).get();r.empty||(t.userDocument=r.docs[0].data(),console.log(t.userDocument))}catch(r){console.error("Error getting user document:",r)}})()}goToValidator(){var t=this;return(0,s.Z)(function*(){try{yield t.getUser(),t.userDocument&&t.userDocument.role&&"on"===t.userDocument.role.validation?t.navController.navigateForward("/ga-validation"):(yield t.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to grade avaerage validator Page:",o)}})()}goToAddUser(){var t=this;return(0,s.Z)(function*(){try{yield t.getUser(),t.userDocument&&t.userDocument.role&&"on"===t.userDocument.role.addUser?t.navController.navigateForward("/add-user"):(yield t.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to Add user Page:",o)}})()}goToEmployment(){var t=this;return(0,s.Z)(function*(){try{yield t.getUser(),t.userDocument&&t.userDocument.role&&"on"===t.userDocument.role.employment?t.navController.navigateForward("/employment-page"):(yield t.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to Employment Page:",o)}})()}goToHistory(){var t=this;return(0,s.Z)(function*(){try{yield t.getUser(),t.userDocument&&t.userDocument.role&&"on"===t.userDocument.role.history?t.navController.navigateForward("/history"):(yield t.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to History Page:",o)}})()}goToWil(){var t=this;return(0,s.Z)(function*(){try{yield t.getUser(),t.userDocument&&t.userDocument.role&&"on"===t.userDocument.role.wil?t.navController.navigateForward("/wil-page"):(yield t.toastController.create({message:"Unauthorized user.",duration:2e3,position:"top"})).present()}catch(o){console.error("Error navigating to WIL Page:",o)}})()}goToMenuPage(){this.navController.navigateForward("/menu").then(()=>{window.location.reload()})}}return(a=g).\u0275fac=function(t){return new(t||a)(e.Y36(m.SH),e.Y36(n.HT),e.Y36(p.zQ),e.Y36(h.Q1),e.Y36(v.ST),e.Y36(n.Br),e.Y36(n.yF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reports"]],standalone:!0,features:[e.jDz],decls:71,vars:7,consts:[[3,"translucent"],[1,"header-container"],[1,"logo"],["src","assets\\MUT LOGO.png","alt","Logo"],[1,"hamburger-menu",3,"click"],[1,"bar"],[1,"nav-links",3,"ngClass"],[1,"nav-link",3,"click"],[1,"nav-link","business-dropdown"],["name","caret-down-outline"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],[1,"menu"],[1,"title"],[1,"image-container"],[1,"image-text"],["src","assets/img1.jpeg","button","",3,"click"],[2,"text-align","center"],["src","assets/img2.jpeg","button","",3,"click"],["src","assets/img3.jpeg","button","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"nav")(2,"div",1)(3,"a",2),e._UZ(4,"img",3),e._uU(5,"Reports"),e.qZA(),e.TgZ(6,"div",4),e.NdJ("click",function(){return o.toggleNav()}),e._UZ(7,"div",5)(8,"div",5)(9,"div",5),e.qZA(),e.TgZ(10,"div",6)(11,"a",7),e.NdJ("click",function(){return o.goToMenuPage()}),e._uU(12,"Menu"),e.qZA(),e.TgZ(13,"div",8)(14,"span"),e._UZ(15,"ion-icon",9),e._uU(16,"Tasks"),e.qZA(),e.TgZ(17,"div",10)(18,"a",11),e.NdJ("click",function(){return o.goToValidator()}),e._uU(19,"Profile Validator"),e.qZA(),e.TgZ(20,"a",11),e.NdJ("click",function(){return o.goToEmployment()}),e._uU(21,"Employment"),e.qZA(),e.TgZ(22,"a",11),e.NdJ("click",function(){return o.goToHistory()}),e._uU(23,"History"),e.qZA(),e.TgZ(24,"a",11),e.NdJ("click",function(){return o.goToWil()}),e._uU(25,"WIL"),e.qZA()()(),e.TgZ(26,"a",7),e.NdJ("click",function(){return o.goToView()}),e._uU(27,"Profile"),e.qZA(),e.TgZ(28,"a",7),e.NdJ("click",function(){return o.presentConfirmationAlert()}),e._uU(29,"Sign Out"),e.qZA()()()()(),e.TgZ(30,"ion-content"),e._UZ(31,"br"),e.TgZ(32,"div",12)(33,"div",13)(34,"ion-label",13),e._uU(35,"Application statistics"),e.qZA()(),e._UZ(36,"br")(37,"ion-grid"),e.qZA(),e.TgZ(38,"ion-grid")(39,"ion-row")(40,"ion-col")(41,"div",14)(42,"div",15),e._uU(43,"Number of applications"),e.qZA(),e._UZ(44,"br"),e.TgZ(45,"img",16),e.NdJ("click",function(){return o.goToAllAppsPage()}),e.qZA(),e._UZ(46,"br"),e.TgZ(47,"p",17),e._uU(48),e.qZA()()(),e.TgZ(49,"ion-col")(50,"div",14)(51,"div",15),e._uU(52,"Recommended applications"),e.qZA(),e._UZ(53,"br"),e.TgZ(54,"img",18),e.NdJ("click",function(){return o.goToRecommended()}),e.qZA(),e._UZ(55,"br"),e.TgZ(56,"p",17),e._uU(57),e.qZA()()(),e.TgZ(58,"ion-col")(59,"div",14)(60,"div",15),e._uU(61,"Placed"),e.qZA(),e._UZ(62,"br"),e.TgZ(63,"img",19),e.NdJ("click",function(){return o.goToPlaced()}),e.qZA(),e._UZ(64,"br"),e.TgZ(65,"p",17),e._uU(66),e.qZA()()()()()(),e.TgZ(67,"ion-footer"),e._uU(68," Designed by @"),e.TgZ(69,"b"),e._uU(70,"MUT INNOVATIONLAB"),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(10),e.Q6J("ngClass",e.VKq(5,T,o.isNavOpen)),e.xp6(38),e.Oqu(o.userCount),e.xp6(9),e.Oqu(o.count),e.xp6(9),e.Oqu(o.placed))},dependencies:[n.Pc,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.Q$,n.Nd,u.ez,u.mk,_.u5],styles:["ion-header[_ngcontent-%COMP%]{background-color:maroon}.logo[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#fff;text-decoration:none;display:flex;align-items:center;transition:color .3s ease-in-out}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:60px;margin-right:10px}"]}),g})()}}]);